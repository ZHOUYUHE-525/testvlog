<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ±‰è¯­ Vlog | å¼€å¯æ²‰æµ¸å¼è¯¾å ‚</title>
    
    <!-- ç«™ç‚¹å›¾æ ‡åŠ App å±æ€§ -->
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    
    <!-- å¼•å…¥èµ„æº -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="auth.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <style>
        :root {
            --primary: #6CAD9C;    /* ç°ç»¿ */
            --accent: #E5CC84;     /* æŸ”é‡‘ */
            --dark-red: #612321;   /* æ·±çº¢ */
            --terracotta: #A77046; /* æ£•çº¢ */
            --beige: #E5DABC;      /* ç±³é»„ */
            --tg-blue: #0088cc;    /* Telegram å®˜æ–¹è“ */
            --glass: rgba(0, 0, 0, 0.7);
        }

        body, html { margin: 0; padding: 0; min-height: 100%; font-family: "PingFang SC", "Microsoft YaHei", sans-serif; background: #000; color: white; scroll-behavior: smooth; }

        /* èƒŒæ™¯è®¾ç½® */
        .bg-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.9) 100%), 
                        url('https://images.unsplash.com/photo-1518481612222-68bbe828ecd1?q=80&w=2070&auto=format&fit=crop');
            background-size: cover; background-position: center; z-index: -1;
            transition: transform 8s ease;
        }
        body.loaded .bg-overlay { transform: scale(1); }

        /* å¯¼èˆª */
        .top-nav { position: fixed; top: 20px; right: 20px; z-index: 1000; }
        .lang-btn { background: var(--glass); border: 1px solid var(--terracotta); color: white; padding: 10px 20px; border-radius: 25px; cursor: pointer; backdrop-filter: blur(15px); font-size: 13px; font-weight: bold; transition: 0.3s; }
        .lang-btn:hover { border-color: var(--accent); background: rgba(255,255,255,0.1); }

        .wrapper { display: flex; flex-direction: column; align-items: center; padding: 100px 20px 60px 20px; }

        /* ç™»å½•å¡ç‰‡ */
        .login-card {
            background: var(--glass); backdrop-filter: blur(40px); -webkit-backdrop-filter: blur(40px);
            border: 1px solid rgba(167, 112, 70, 0.3); border-radius: 24px; padding: 40px; width: 100%; max-width: 380px;
            text-align: center; box-shadow: 0 30px 60px rgba(0,0,0,0.8); margin-bottom: 60px;
        }
        .logo-area i { font-size: 45px; color: var(--terracotta); margin-bottom: 15px; }
        .logo-area h1 { font-size: 30px; margin: 0; letter-spacing: 3px; color: var(--beige); }

        .input-group { margin-top: 25px; text-align: left; }
        .input-group label { display: block; font-size: 11px; color: var(--beige); opacity: 0.8; margin-bottom: 5px; padding-left: 5px;}
        input {
            width: 100%; padding: 14px; border-radius: 10px;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(167, 112, 70, 0.3);
            color: white; outline: none; transition: 0.3s; box-sizing: border-box; font-size: 15px;
        }
        input:focus { border-color: var(--accent); background: rgba(255,255,255,0.1); }

        .btn-main {
            width: 100%; padding: 16px; border: none; border-radius: 10px;
            background: linear-gradient(135deg, var(--terracotta) 0%, var(--dark-red) 100%);
            color: white; font-weight: 800; font-size: 16px; cursor: pointer; transition: 0.3s; margin-top: 25px;
        }
        .btn-main:hover { filter: brightness(1.2); }

        .toggle-link { margin-top: 25px; font-size: 13px; color: var(--accent); cursor: pointer; text-decoration: underline; opacity: 0.8; }

        /* ä»·æ ¼è¡¨æ ·å¼ */
        .pricing-list { width: 100%; max-width: 480px; display: flex; flex-direction: column; gap: 25px; }
        .price-item {
            background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px; padding: 30px; position: relative; backdrop-filter: blur(10px); transition: 0.3s; cursor: pointer;
        }
        .price-item.active { border-color: var(--accent); border-width: 2px; background: rgba(229, 204, 132, 0.05); }
        .price-item h3 { margin: 0; color: var(--accent); font-size: 22px; }
        .price-row { display: flex; align-items: baseline; gap: 12px; margin: 15px 0 5px 0; }
        .price-now { font-size: 34px; font-weight: 900; color: white; }
        .price-old { font-size: 18px; color: #888; text-decoration: line-through; }
        .price-reason { font-size: 12px; color: var(--accent); opacity: 0.8; margin-bottom: 10px; display: block; }
        .price-remark { font-size: 14px; color: var(--primary); font-weight: bold; margin-bottom: 20px; display: block; }
        .features { padding: 0; list-style: none; text-align: left; }
        .features li { font-size: 13px; margin-bottom: 10px; opacity: 0.9; display: flex; align-items: flex-start; gap: 10px; line-height: 1.4; color: #ddd; }
        .features li i { color: var(--primary); margin-top: 3px; font-size: 12px;}

        .coming-soon { position: absolute; top: 20px; right: 20px; font-size: 10px; background: rgba(255,255,255,0.1); padding: 4px 10px; border-radius: 10px; color: #aaa; }

        /* æ”¯ä»˜é¢æ¿ */
        .modal { 
    display: none; 
    position: fixed; 
    inset: 0; 
    background: rgba(0,0,0,0.9); 
    z-index: 2000; 
    
    /* æ ¸å¿ƒä¿®æ”¹ï¼šå¦‚æœå†…å®¹è¶…é•¿ï¼Œå…è®¸å‚ç›´æ»šåŠ¨ */
    overflow-y: auto; 
    padding: 40px 20px; /* å¢åŠ ä¸Šä¸‹ç•™ç™½ï¼Œé˜²æ­¢å†…å®¹è´´è¾¹ */
    
    /* å¸ƒå±€è°ƒæ•´ï¼šè®©å¼¹çª—å†…å®¹å±…ä¸­ï¼Œä½†é«˜åº¦è¶…æ ‡æ—¶è‡ªåŠ¨ä»é¡¶ç«¯å¼€å§‹ */
    align-items: flex-start; 
    justify-content: center;
}
        /* ğŸŸ¢ ä¿®å¤åçš„å¼¹çª—å†…å®¹ï¼šé«˜åº¦è‡ªé€‚åº” */
.modal-content { 
    background: #111; 
    border: 1px solid var(--terracotta); 
    border-radius: 24px; 
    width: 100%; 
    max-width: 480px; 
    padding: 35px; 
    text-align: center; 
    position: relative; 
    box-shadow: 0 0 50px rgba(167, 112, 70, 0.2);
    
    /* æ ¸å¿ƒä¿®æ”¹ï¼šç¡®ä¿åœ¨ Flex å¸ƒå±€ä¸­ä¸ä¼šè¢«å‹ç¼© */
    margin: auto; 
    flex-shrink: 0; 
}
        /* ğŸ“± é’ˆå¯¹æ‰‹æœºç«¯çš„ç‰¹æ®Šä¼˜åŒ– */
@media (max-width: 768px) {
    .modal { padding: 20px 10px; }
    .modal-content { padding: 25px 15px; border-radius: 15px; }
    .pay-grid { gap: 10px; }
}
        .pay-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 25px; }
        .pay-btn { background: #222; border: 1px solid #333; color: white; padding: 15px; border-radius: 12px; cursor: pointer; transition: 0.3s; display: flex; flex-direction: column; align-items: center; gap: 8px; font-size: 13px; }
        .pay-btn:hover { background: #2a2a2a; border-color: var(--accent); }
        .pay-info-box { display: none; margin-top: 25px; padding: 20px; background: #000; border-radius: 12px; border: 1px dashed var(--terracotta); animation: fadeIn 0.4s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        

        #msg { margin-top: 15px; font-size: 13px; font-weight: bold; text-align: center; }
        
        /* Telegram æŒ‰é’®ä¸“ç”¨æ ·å¼ */
        .btn-telegram { background: var(--tg-blue) !important; color: white !important; font-size: 13px; padding: 12px 25px; border-radius: 10px; text-decoration: none; display: inline-flex; align-items: center; gap: 8px; margin-top: 15px; font-weight: bold; transition: 0.3s; }
        .btn-telegram:hover { filter: brightness(1.2); transform: translateY(-2px); }
    </style>
</head>
<body>

    <div class="bg-overlay"></div>

    <div class="top-nav">
        <button class="lang-btn" onclick="toggleLang()" id="langBtn">ğŸ‡·ğŸ‡º RU / ğŸ‡ºğŸ‡¸ EN / ğŸ‡¨ğŸ‡³ CN</button>
    </div>

    <div class="wrapper">
        <div class="login-card">
            <div class="logo-area">
                <i class="fas fa-film"></i>
                <h1 id="brandName">æ±‰è¯­ Vlog</h1>
                <p id="modeDesc">æ²‰æµ¸å¼å­¦æ±‰è¯­ Â· ç™»å½•ä¸­å¿ƒ</p>
            </div>

            <div class="input-group">
                <label id="labelUser">è´¦å· / Email / Ğ›Ğ¾Ğ³Ğ¸Ğ½</label>
                <input type="email" id="email" placeholder="example@mail.com">
            </div>
            <div class="input-group">
                <label id="labelPass">å¯†ç  / Password / ĞŸĞ°Ñ€Ğ¾Ğ»ÑŒ</label>
                <input type="password" id="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
            </div>

            <button class="btn-main" onclick="handleAuthAction()" id="actionBtn">ç™»å½• / Login / Ğ’Ğ¾Ğ¹Ñ‚Ğ¸</button>
            <div id="msg"></div>

            <div class="toggle-link" onclick="toggleMode()" id="toggleBtn">è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»è¿™é‡Œæ³¨å†Œæ–°ç”¨æˆ·</div>
        </div>

        <div class="pricing-list" id="pricingList"></div>
    </div>

    <!-- æ”¯ä»˜é¢æ¿å¼¹çª— -->
    <div id="payModal" class="modal">
        <div class="modal-content">
            <div class="modal-close" onclick="closePayModal()">Ã—</div>
            <h2 id="payModalTitle" style="color:var(--accent); margin:0;">è§£é”æ­£å¼ç‰ˆ</h2>
            
            <p id="payStep1" style="font-size:13px; opacity:0.9; margin-top:15px; color:var(--accent); line-height:1.4;"></p>
            <input type="email" id="payEmail" placeholder="" style="margin-top:10px; border: 1px solid var(--terracotta); background: #000; text-align:center;">
            
            <p id="payStep2" style="font-size:13px; opacity:0.7; margin-top:20px;"></p>
            <div class="pay-grid">
                <div class="pay-btn" onclick="showPayDetail('wechat')"><i class="fab fa-weixin" style="color:#07c160"></i>WeChat</div>
                <div class="pay-btn" onclick="showPayDetail('alipay')"><i class="fab fa-alipay" style="color:#1677ff"></i>Alipay</div>
                <div class="pay-btn" onclick="showPayDetail('sbp')"><i class="fas fa-university" style="color:var(--primary)"></i>Ğ¡Ğ‘ĞŸ (Ğ‘Ğ°Ğ½Ğº)</div>
                <div class="pay-btn" onclick="showPayDetail('paypal')"><i class="fab fa-paypal" style="color:#003087"></i>PayPal</div>
            </div>

            <div id="payDetail" class="pay-info-box">
                <div id="payContent" style="font-size:14px; text-align:left; color:#eee;"></div>
                
                <!-- é†’ç›®å¤‡æ³¨æé†’ -->
                <div style="background: rgba(229, 204, 132, 0.1); padding: 10px; border: 1px solid var(--accent); border-radius: 8px; margin-top: 15px; text-align: left;">
                    <p id="remarkWarning" style="font-size:12px; color:var(--accent); margin:0; line-height:1.5; font-weight:bold;"></p>
                </div>

                <!-- éè‡ªåŠ¨è§£é”è­¦å‘Š -->
                <p id="unlockWarning" style="font-size:11px; color:#aaa; margin-top:15px; text-align:left; line-height:1.5;"></p>
                
                <!-- Telegram è·³è½¬æŒ‰é’® -->
                <a href="https://t.me/zhouyuhe" target="_blank" class="btn-telegram" id="contactBtn">
                    <i class="fab fa-telegram"></i> <span>è”ç³»è€å¸ˆå¼€é€š</span>
                </a>
            </div>
        </div>
    </div>

    <script>
        const loginClient = window.supabase.createClient('https://bwweaohahsafbecogist.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJ3d2Vhb2hhaHNhZmJlY29naXN0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njg3NTk3MjMsImV4cCI6MjA4NDMzNTcyM30.ZqViPiwlvzzaqkWLMzejjpgHXeztkD0K0ne32kfGhWw');

        let currentLang = 'ru';
        let isSignUpMode = false;

        const uiDict = {
            ru: {
                brand: "ĞšĞ¸Ñ‚Ğ°Ğ¹ÑĞºĞ¸Ğ¹ Vlog", login_desc: "Ğ£Ñ‡Ğ¸Ñ‚Ğµ ĞºĞ¸Ñ‚Ğ°Ğ¹ÑĞºĞ¸Ğ¹ Ñ‡ĞµÑ€ĞµĞ· Ğ²Ğ¸Ğ´ĞµĞ¾", go_signup: "ĞĞµÑ‚ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚Ğ°? Ğ—Ğ°Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ", go_login: "Ğ£Ğ¶Ğµ ĞµÑÑ‚ÑŒ Ğ°ĞºĞºĞ°ÑƒĞ½Ñ‚? Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", btn_login: "Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", btn_signup: "Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", msg_processing: "Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...",
                pay_modal_title: "Ğ Ğ°Ğ·Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Season 1",
                pay_step_1: "Ğ¨Ğ°Ğ³ 1: Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ email",
                pay_step_2: "Ğ¨Ğ°Ğ³ 2: Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ ÑĞ¿Ğ¾ÑĞ¾Ğ± Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ñ‹",
                pay_email_placeholder: "Ğ²Ğ°Ñˆ@email.com",
                remark_warning: "âš ï¸ ĞŸÑ€Ğ¸ Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ Ğ¾Ğ±ÑĞ·Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ ĞµÑ‰Ñ‘ Ñ€Ğ°Ğ· ÑƒĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹ Email Ğ² Ğ¿Ğ¾Ğ»Ğµ Â«ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¹Â»!",
                unlock_warning: "âš ï¸ Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ <b>ĞĞ• Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸</b>. ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ [ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ ÑÑ‚Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹] Ğ¸ [ĞºĞ²Ğ¸Ñ‚Ğ°Ğ½Ñ†Ğ¸Ñ Ğ¾Ğ± Ğ¾Ğ¿Ğ»Ğ°Ñ‚Ğµ] ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»Ñ.ğŸ‘‡",
                contact_teacher: "Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ĞµĞ¼",
                plans: [
                    { id: 'trial', title: "ĞŸÑ€Ğ¾Ğ±Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ", price: "$0", features: ["Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°ĞµÑ‚ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº 3 Ğ²Ğ¸Ğ´ĞµĞ¾", "Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ²ÑĞµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ ÑĞ°Ğ¹Ñ‚Ğ°", "ĞŸĞµÑ‡Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ² Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ 3 ÑƒÑ€Ğ¾ĞºĞ¾Ğ²", "PDF-ÑƒÑ‡ĞµĞ±Ğ½Ğ¸ĞºĞ¸ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹ Ğ´Ğ»Ñ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ñ", "Ğ¡Ñ€Ğ¾Ğº Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ: 24 Ñ‡Ğ°ÑĞ°"] },
                    { id: 's1', title: "ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ (Ğ¡ĞµĞ·Ğ¾Ğ½ 1)", price: "$29.9", old: "$49.9", reason: "(Ğ¦ĞµĞ½Ğ° ÑĞ½Ğ¸Ğ¶ĞµĞ½Ğ°, Ğ²Ğ¸Ğ´ĞµĞ¾ ĞµÑ‰Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑÑÑ‚ÑÑ)", remark: "2300P / 208Â¥", active: true, features: ["120 ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¸Ñ… Ğ²Ğ¸Ğ´ĞµĞ¾ÑƒÑ€Ğ¾ĞºĞ¾Ğ²", "Ğ‘ĞĞĞ£Ğ¡: 30 Ğ²Ğ¸Ğ´ĞµĞ¾ Ñ‚Ğ¾Ğº-ÑˆĞ¾Ñƒ", "ĞŸĞµÑ‡Ğ°Ñ‚ÑŒ Ğ²ÑĞµÑ… ÑĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¾Ğ² Ğº Ğ²Ğ¸Ğ´ĞµĞ¾", "Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾Ğµ ÑĞºĞ°Ñ‡Ğ¸Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ²ÑĞµÑ… PDF", "ĞĞ±Ğ»Ğ°Ñ‡Ğ½Ğ°Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…", "Ğ ĞĞ—ĞĞ’ĞĞ¯ ĞĞŸĞ›ĞĞ¢Ğ â€” Ğ’Ğ•Ğ§ĞĞ«Ğ™ Ğ”ĞĞ¡Ğ¢Ğ£ĞŸ"] },
                    { id: 's2', title: "Ğ¡ĞµĞ·Ğ¾Ğ½ 2", price: "-", soon: "ĞĞ–Ğ˜Ğ”ĞĞ•Ğ¢Ğ¡Ğ¯", features: ["Ğ¡ĞºĞ¾Ñ€Ğ¾ Ğ² Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ¶Ğµ..."] },
                    { id: 'vip', title: "Ğ¡ÑƒĞ¿ĞµÑ€ VIP", price: "-", soon: "ĞĞ–Ğ˜Ğ”ĞĞ•Ğ¢Ğ¡Ğ¯", features: ["Ğ’ÑĞµ Ğ²Ğ¸Ğ´ĞµĞ¾: Vlog, ĞŸĞ¾Ğ´ĞºĞ°ÑÑ‚Ñ‹, HSK", "Ğ¡ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹, Ğ¤Ğ¸Ğ»ÑŒĞ¼Ñ‹, ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸, Ğ¨Ğ¾Ñƒ"] }
                ]
            },
            cn: {
                brand: "æ±‰è¯­ Vlog è¯¾å ‚", login_desc: "æ²‰æµ¸å¼å­¦æ±‰è¯­ Â· ç™»å½•ä¸­å¿ƒ", go_signup: "è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç‚¹å‡»è¿™é‡Œæ³¨å†Œæ–°ç”¨æˆ·", go_login: "å·²æœ‰è´¦å·ï¼Ÿè¿”å›ç™»å½•", btn_login: "ç™»å½• / Login / Ğ’Ğ¾Ğ¹Ñ‚Ğ¸", btn_signup: "æ³¨å†Œ / Sign Up / Ğ ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ", msg_processing: "å¤„ç†ä¸­ / Processing...",
                pay_modal_title: "è§£é”æ­£å¼ç‰ˆ (ç¬¬ä¸€å­£)",
                pay_step_1: "ç¬¬ä¸€æ­¥ï¼šè¾“å…¥æ‚¨æ³¨å†Œè´¦å·æ—¶ä½¿ç”¨çš„é‚®ç®±",
                pay_step_2: "ç¬¬äºŒæ­¥ï¼šé€‰æ‹©æ”¯ä»˜æ–¹å¼",
                pay_email_placeholder: "è¾“å…¥æ‚¨çš„æ³¨å†Œé‚®ç®±",
                remark_warning: "âš ï¸ ä»˜æ¬¾æ—¶è¯·åŠ¡å¿…å†æ¬¡åœ¨â€œæ·»åŠ å¤‡æ³¨â€å¤„å¡«å†™æ‚¨çš„æ³¨å†Œé‚®ç®±ï¼",
                unlock_warning: "âš ï¸ æ³¨æ„ï¼šä»˜æ¬¾å<b>æ— æ³•ç«‹å³è‡ªåŠ¨è§£é”</b>ã€‚è¯·å°†ã€ä»˜æ¬¾è´¦å•ã€‘å’Œã€æ­¤é¡µé¢æˆªå›¾ã€‘å‘é€ç»™è€å¸ˆæ‰‹åŠ¨å¼€å¯æƒé™ã€‚ğŸ‘‡",
                contact_teacher: "å‘é€æˆªå›¾è”ç³»è€å¸ˆ",
                plans: [
                    { id: 'trial', title: "è¯•ç”¨ç‰ˆ", price: "$0", features: ["æ³¨å†Œå¯è§‚çœ‹ 3 ä¸ªè§†é¢‘", "ä½“éªŒç½‘ç«™å†…æ‰€æœ‰åŠŸèƒ½", "ä»…å¯æ‰“å° 3 ä¸ªå°è¯æœ¬", "ç”µå­è¯¾æœ¬ (PDF) ä¸å¯ä¸‹è½½", "æœ‰æ•ˆæœŸ 24 å°æ—¶"] },
                    { id: 's1', title: "æ­£å¼ç‰ˆ (ç¬¬ä¸€å­£)", price: "$29.9", old: "$49.9", reason: "(ç”±äºè§†é¢‘æš‚æœªæ›´æ–°å®Œ)", remark: "208Â¥ / 2300P", active: true, features: ["120 ä¸ªç²¾å½©çŸ­è§†é¢‘", "é™æ—¶èµ é€ 30 ä¸ªè„±å£ç§€è§†é¢‘", "æ‰€æœ‰å°è¯å‰§æœ¬å¯æ‰“å°", "æ‰€æœ‰ PDF èµ„æºå…è´¹ä¸‹è½½", "ç”Ÿè¯æœ¬å­¦ä¹ æ•°æ®äº‘ç«¯åŒæ­¥", "ä¹°æ–­åˆ¶ï¼Œä¸€æ¬¡æ€§ä»˜æ¬¾æ°¸ä¹…è§‚çœ‹"] },
                    { id: 's2', title: "ç¬¬äºŒå­£", price: "-", soon: "æ•¬è¯·æœŸå¾…", features: ["å³å°†ä¸Šçº¿"] },
                    { id: 'vip', title: "è¶…çº§ä¼šå‘˜", price: "$-", soon: "æ•¬è¯·æœŸå¾…", features: ["ç½‘ç«™å†…æ‰€æœ‰è§†é¢‘: Vlog, åšå®¢, HSK", "å…¨ç«™ç”µè§†å‰§ã€ç”µå½±ã€æ–°é—»ã€ç»¼è‰º"] }
                ]
            },
            en: {
                brand: "Hanyu Vlog Class", login_desc: "Immersive Chinese Learning", go_signup: "New? Create Account", go_login: "Have account? Login", btn_login: "Login", btn_signup: "Sign Up", msg_processing: "Processing...",
                pay_modal_title: "Unlock Season 1 Access",
                pay_step_1: "Step 1: Enter your registered email",
                pay_step_2: "Step 2: Select payment method",
                pay_email_placeholder: "your@email.com",
                remark_warning: "âš ï¸ Important: Please add your registered email again in the payment remarks!",
                unlock_warning: "âš ï¸ Note: Access <b>will NOT be unlocked automatically</b>. Send your receipt and this screenshot to the teacher.ğŸ‘‡",
                contact_teacher: "Send Screenshot to Teacher",
                plans: [
                    { id: 'trial', title: "Trial Version", price: "$0", features: ["Watch 3 videos upon registration", "Full access to all interactive tools", "Print only 3 scripts", "PDF downloads locked", "Validity: 24 hours"] },
                    { id: 's1', title: "Official (Season 1)", price: "$29.9", old: "$49.9", reason: "(Discounted: still updating)", remark: "approx. 208Â¥ / 2300P", active: true, features: ["120 short video lessons", "Bonus: 30 Talk Show videos", "Unlimited script printing", "All PDF textbooks free to download", "Cloud vocab sync", "ONE-TIME PAYMENT, LIFETIME ACCESS"] },
                    { id: 's2', title: "Season 2", price: "-", soon: "COMING SOON", features: ["Stay tuned"] },
                    { id: 'vip', title: "Super Member", price: "$-", soon: "COMING SOON", features: ["All site videos: Vlog, Blogs, HSK", "All TV Dramas, Movies, News & Shows"] }
                ]
            }
        };

        function updateUI() {
            const dict = uiDict[currentLang];
            document.getElementById('brandName').innerText = dict.brand;
            document.getElementById('actionBtn').innerText = isSignUpMode ? dict.btn_signup : dict.btn_login;
            document.getElementById('toggleBtn').innerText = isSignUpMode ? dict.go_login : dict.go_signup;
            document.getElementById('modeDesc').innerText = dict.login_desc;
            
            // ğŸŸ¢ å¼¹çª—æ–‡å­—åŒæ­¥
            document.getElementById('payModalTitle').innerText = dict.pay_modal_title;
            document.getElementById('payStep1').innerText = dict.pay_step_1;
            document.getElementById('payStep2').innerText = dict.pay_step_2;
            document.getElementById('payEmail').placeholder = dict.pay_email_placeholder;
            document.getElementById('remarkWarning').innerHTML = dict.remark_warning;
            document.getElementById('unlockWarning').innerHTML = dict.unlock_warning;
            document.getElementById('contactBtn').querySelector('span').innerText = dict.contact_teacher;

            const list = document.getElementById('pricingList');
            list.innerHTML = dict.plans.map(p => `
                <div class="price-item ${p.active ? 'active' : ''}" onclick="handlePriceClick('${p.id}')">
                    ${p.soon ? `<span class="coming-soon">${p.soon}</span>` : ''}
                    <h3>${p.title}</h3>
                    <div class="price-row">
                        <span class="price-now">${p.price}</span>
                        ${p.old ? `<span class="price-old">${p.old}</span>` : ''}
                    </div>
                    ${p.reason ? `<div class="price-reason">${p.reason}</div>` : ''}
                    ${p.remark ? `<span class="price-remark">${p.remark}</span>` : ''}
                    <ul class="features">${p.features.map(f => `<li><i class="fas fa-check-circle"></i> ${f}</li>`).join('')}</ul>
                </div>`).join('');
        }

        function handlePriceClick(id) {
            if (id === 'trial') { isSignUpMode = true; updateUI(); window.scrollTo({ top: 0, behavior: 'smooth' }); document.getElementById('email').focus(); }
            else if (id === 's1') { document.getElementById('payModal').style.display = 'flex'; document.getElementById('payEmail').value = document.getElementById('email').value; }
        }

        function closePayModal() { document.getElementById('payModal').style.display = 'none'; }

        function showPayDetail(type) {
            const email = document.getElementById('payEmail').value.trim();
            if (!email || !email.includes('@')) { alert(currentLang === 'ru' ? "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Email" : "è¯·è¾“å…¥æ³¨å†Œé‚®ç®±"); return; }
            document.getElementById('payDetail').style.display = 'block';
            const content = document.getElementById('payContent');
            const pInfo = "<b>208 Â¥ / 2300 Ñ€ÑƒĞ±. ($29.9)</b>";
            if (type === 'wechat') content.innerHTML = `<img src="wechat_pay.jpg" style="width:180px; border-radius:10px; margin-bottom:10px;"><p>WeChat Pay: ${pInfo}</p>`;
            else if (type === 'alipay') content.innerHTML = `<img src="alipay_pay.jpg" style="width:180px; border-radius:10px; margin-bottom:10px;"><p>Alipay: ${pInfo}</p>`;
            else if (type === 'sbp') {
        content.innerHTML = `
            <div style="text-align:center; background:#1a1a1a; padding:15px; border-radius:12px;">
                <p style="margin-bottom:15px; color:var(--primary); font-weight:bold;">
                    Ğ¡Ğ‘ĞŸ (ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ‡ĞµÑ€ĞµĞ· Ğ¡Ğ±ĞµÑ€Ğ±Ğ°Ğ½Ğº)
                </p>
                
                <!-- ğŸŸ¢ 1. æ˜¾ç¤ºæ”¶æ¬¾äºŒç»´ç  -->
                <img src="sbp_pay.jpg" style="width:200px; border-radius:10px; margin-bottom:15px; border: 5px solid white;">
                
                <!-- ğŸŸ¢ 2. æä¾›ç›´æ¥ç‚¹å‡»è·³è½¬çš„æŒ‰é’® -->
                <a href="https://www.sberbank.com/sms/pbpn?requisiteNumber=79627266618" 
                   target="_blank" 
                   class="btn-main" 
                   style="display:inline-block; width:auto; padding:10px 25px; background:#21a038; font-size:14px; text-decoration:none;">
                    <i class="fas fa-external-link-alt"></i> ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ² Ğ¡Ğ±ĞµÑ€Ğ±Ğ°Ğ½Ğº ĞĞ½Ğ»Ğ°Ğ¹Ğ½
                </a>
                
                <div style="text-align:left; margin-top:20px; font-size:13px; color:#aaa; border-top:1px solid #333; padding-top:15px;">
                    <p>Ğ¢ĞµĞ»ĞµÑ„Ğ¾Ğ½: <b>+7 962 726 66 18</b></p>
                    <p>ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°Ñ‚ĞµĞ»ÑŒ: <b>Ğ§Ğ¶Ğ¾Ñƒ Ğ®Ğ¹Ñ…Ñ (Aiya)</b></p>
                    <p>Ğ¡ÑƒĞ¼Ğ¼Ğ°: <b>2300 Ñ€ÑƒĞ±.</b></p>
                </div>
            </div>`;
    }
            else if (type === 'paypal') content.innerHTML = `<p>PayPal: <b>zhouyuhe525@gmail.com</b></p><a href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=zhouyuhe525@gmail.com&item_name=Season1&amount=29.90&currency_code=USD" target="_blank" class="btn-main" style="display:inline-block; width:auto; padding:10px 25px;">Pay via PayPal ($29.9)</a>`;
        }

        function toggleLang() { currentLang = (currentLang === 'ru') ? 'en' : (currentLang === 'en' ? 'cn' : 'ru'); updateUI(); }
        function toggleMode() { isSignUpMode = !isSignUpMode; updateUI(); }

        async function handleAuthAction() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const msg = document.getElementById('msg');
            if(!email || !password) { msg.style.color="red"; msg.innerText = "Error: Input required"; return; }
            try {
                if (isSignUpMode) {
                    const { error } = await loginClient.auth.signUp({ email, password });
                    if (error) throw error;
                    msg.style.color = "#E5CC84"; msg.innerText = "Success! Log in now.";
                    setTimeout(() => { toggleMode(); }, 1500);
                } else {
                    const { data, error } = await loginClient.auth.signInWithPassword({ email, password });
                    if (error) throw error;
                    const newToken = Date.now() + "_" + Math.random();
                    await loginClient.from('profiles').upsert({ id: data.user.id, session_token: newToken });
                    localStorage.setItem('my_session_token', newToken);
                    const { data: profile } = await loginClient.from('profiles').select('progress, access_tags').eq('id', data.user.id).maybeSingle();
                    if (profile) {
                        if(profile.progress) Object.keys(profile.progress).forEach(k => localStorage.setItem(k, profile.progress[k]));
                        if(profile.access_tags) localStorage.setItem('my_access_tags', JSON.stringify(profile.access_tags));
                    }
                    window.location.href = 'home.html?from_login=1';
                }
            } catch (err) { msg.style.color = "#ff4d4f"; msg.innerText = err.message; }
        }
        document.addEventListener('DOMContentLoaded', () => { updateUI(); document.body.classList.add('loaded'); });
    </script>
</body>
</html>
